[master]
# When more than 2 masters specified, a HA cluster will be installed.
m1.ha.env.lab.io ansible_host=10.38.1.13
m2.ha.env.lab.io ansible_host=10.38.1.14
m3.ha.env.lab.io ansible_host=10.38.1.15

[nodes]
n1.ha.env.lab.io ansible_host=10.38.1.16
n2.ha.env.lab.io ansible_host=10.38.1.17

[localhost]
localhost

[kubernetes_nodes:children]
master
nodes

[all:vars]
# The version of K8S to be installed which should be same to the release on GitHub. The latest version is used if not specified.
# kube_release_version = v1.12.9

# If sets to True, simple-kube will compare the checksum of local cached tarball to the release on GitHub.
# If check failed, simple-kube will download a new release from GitHub.
verify_kube_release = True

# CIDR of the Pod network
pod_cidr = 10.20.0.0/16

# CIDR of the Service network
service_cidr = 10.21.0.0/16

# The virtual IP of kube-apiserver for a HA cluster
apiserver_vip = 10.38.1.225

# The image for etcd
etcd_image = quay.io/coreos/etcd:v3.2.18

# Determine whether to install CoreDNS as the default DNS component and the image for CoreDNS.
install_coredns = True
coredns_image = coredns/coredns:1.5.0

# The image of the pause container
pod_infra_container_image = kubernetes/pause:go

# Determine whether to install Docker and where to download packages
install_docker = True
docker_release_remote = https://download.docker.com/linux/static/stable/x86_64/docker-19.03.1.tgz

# Specify CNI plugin to be installed. Only weave-net supported now.
cni_plugin = weave-net

# Timeout for installing package from official repositories
network_activity_timeout = 60 # in secs

# Proxy mode for kube-proxy. The value could be one of iptables, ipvs and userspace(deprecated).
proxy_mode = ipvs

local_cache_path = {{ playbook_dir }}/on-prem-cache
kube_release_local = {{ playbook_dir }}/releases/kubernetes-server-linux-amd64.tar.gz
cni_plugins_local = {{ playbook_dir }}/releases/cni-plugins-amd64.tgz

retry_period_in_seconds = 5
api_server_first_up_retry_cycle = 50
node_role_setting_retry_cycle = 10

[localhost:vars]
ansible_connection=local

pki_path={{ playbook_dir }}/pki
remote_pki_path=/etc/kubernetes/pki
kube_ca_key="{{ pki_path }}/kube-ca-key.pem"
kube_ca_crt="{{ pki_path }}/kube-ca.pem"
kube_ca_csr="{{ pki_path }}/kube-ca-csr.pem"
etcd_ca_key="{{ pki_path }}/etcd-ca-key.pem"
etcd_ca_crt="{{ pki_path }}/etcd-ca.pem"
etcd_ca_csr="{{ pki_path }}/etcd-ca-csr.pem"
kube_front_proxy_ca_key="{{ pki_path }}/kube-front-proxy-ca-key.pem"
kube_front_proxy_ca_crt="{{ pki_path }}/kube-front-proxy-ca.pem"
kube_front_proxy_ca_csr="{{ pki_path }}/kube-front-proxy-ca-csr.pem"
etcd_health_check_cert_key="{{ pki_path }}/etcd-healthcheck-client-key.pem"
etcd_health_check_cert_crt="{{ pki_path }}/etcd-healthcheck-client.pem"
etcd_health_check_cert_csr="{{ pki_path }}/etcd-healthcheck-client-csr.pem"
apiserver_etcd_client_cert_key="{{ pki_path }}/apiserver-etcd-client-key.pem"
apiserver_etcd_client_cert_crt="{{ pki_path }}/apiserver-etcd-client.pem"
apiserver_etcd_client_cert_csr="{{ pki_path }}/apiserver-etcd-client-csr.pem"

service_account_cert_key="{{ pki_path }}/service-account-key.pem"
service_account_cert_crt="{{ pki_path }}/service-account.pem"
service_account_cert_csr="{{ pki_path }}/service-account-csr.pem"

[kubernetes_nodes:vars]
ansible_user=root

local_pki_path={{ playbook_dir }}/pki
pki_path=/etc/kubernetes/pki
manifest_path=/etc/kubernetes/manifests
kube_ca_key="{{ pki_path }}/kube-ca-key.pem"
kube_ca_crt="{{ pki_path }}/kube-ca.pem"
kube_ca_csr="{{ pki_path }}/kube-ca-csr.pem"
etcd_ca_key="{{ pki_path }}/etcd-ca-key.pem"
etcd_ca_crt="{{ pki_path }}/etcd-ca.pem"
etcd_ca_csr="{{ pki_path }}/etcd-ca-csr.pem"
kube_front_proxy_ca_key="{{ pki_path }}/kube-front-proxy-ca-key.pem"
kube_front_proxy_ca_crt="{{ pki_path }}/kube-front-proxy-ca.pem"
kube_front_proxy_ca_csr="{{ pki_path }}/kube-front-proxy-ca-csr.pem"
etcd_health_check_cert_key="{{ pki_path }}/etcd-healthcheck-client-key.pem"
etcd_health_check_cert_crt="{{ pki_path }}/etcd-healthcheck-client.pem"
etcd_health_check_cert_csr="{{ pki_path }}/etcd-healthcheck-client-csr.pem"
apiserver_etcd_client_cert_key="{{ pki_path }}/apiserver-etcd-client-key.pem"
apiserver_etcd_client_cert_crt="{{ pki_path }}/apiserver-etcd-client.pem"
apiserver_etcd_client_cert_csr="{{ pki_path }}/apiserver-etcd-client-csr.pem"
apiserver_cert_key="{{ pki_path }}/kube-api-server-key.pem"
apiserver_cert_crt="{{ pki_path }}/kube-api-server.pem"
apiserver_cert_csr="{{ pki_path }}/kube-api-server-csr.pem"
kubelet_client_cert_key="{{ pki_path }}/apiserver-kubelet-client-key.pem"
kubelet_client_cert_crt="{{ pki_path }}/apiserver-kubelet-client.pem"
kubelet_client_cert_csr="{{ pki_path }}/apiserver-kubelet-client-csr.pem"
controller_manager_cert_key="{{ pki_path }}/kube-controller-manager-key.pem"
controller_manager_cert_crt="{{ pki_path }}/kube-controller-manager.pem"
controller_manager_cert_csr="{{ pki_path }}/kube-controller-manager-csr.pem"
scheduler_cert_key="{{ pki_path }}/kube-scheduler-key.pem"
scheduler_cert_crt="{{ pki_path }}/kube-scheduler.pem"
scheduler_cert_csr="{{ pki_path }}/kube-scheduler-csr.pem"
admin_cert_key="{{ pki_path }}/admin-key.pem"
admin_cert_crt="{{ pki_path }}/admin.pem"
admin_cert_csr="{{ pki_path }}/admin-csr.pem"
kube_front_proxy_client_cert_key="{{ pki_path }}/kube-front-proxy-client-key.pem"
kube_front_proxy_client_cert_crt="{{ pki_path }}/kube-front-proxy-client.pem"
kube_front_proxy_client_cert_csr="{{ pki_path }}/kube-front-proxy-client-csr.pem"
service_account_cert_key="{{ pki_path }}/service-account-key.pem"
service_account_cert_crt="{{ pki_path }}/service-account.pem"
service_account_cert_csr="{{ pki_path }}/service-account-csr.pem"
remote_kubelet_certs_path="/tmp/kubelet-cert"
ha_home="/etc/kubernetes/ha"